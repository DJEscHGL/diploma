\documentclass[a4paper]{extreport}
\usepackage[14pt]{extsizes}
\usepackage{fontspec}
\defaultfontfeatures{Ligatures={TeX},Renderer=Basic} 
\setmainfont[Ligatures={TeX,Historic}]{Times New Roman}
\usepackage[english, russian]{babel}
\usepackage{setspace}
\usepackage{float}
\usepackage{indentfirst}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{array}
\usepackage{titlesec}
\usepackage{appendix}
\usepackage[footnote]{acronym}
\usepackage[top=2cm, bottom=2cm, left=3cm, right=1cm, nofoot, nohead]{geometry}
\usepackage{titlesec}
\usepackage{tocloft}
\usepackage{lastpage}
\usepackage{etoolbox}

\titleformat{\chapter}[display]
{\filcenter}
{{\large\textbf{\MakeUppercase{\chaptertitlename} \thechapter}}}
{5pt}
{\bfseries}{}

\titleformat{\section}
{\normalsize\bfseries}
{\thesection}
{1em}{}

\titleformat{\subsection}
{\normalsize\bfseries}
{\thesubsection}
{1em}{}

% Настройка вертикальных и горизонтальных отступов
\titlespacing*{\chapter}{0pt}{-30pt}{8pt}
\titlespacing*{\section}{\parindent}{*4}{*1}
\titlespacing*{\subsection}{\parindent}{*4}{*1}

\newcommand{\likechapterheading}[1]{ 
	\begin{center}
		\textbf{\MakeUppercase{#1}}
	\end{center}
}

\makeatletter
	\renewcommand{\@dotsep}{2}
	\newcommand{\l@likechapter}[2]{{\@dottedtocline{0}{0pt}{0pt}{\bfseries #1}{\bfseries #2}}}
\makeatother

\newcommand{\likechapter}[1]{    
	\likechapterheading{#1}    
	\addcontentsline{toc}{likechapter}{\MakeUppercase{#1}}}

\renewcommand{\cfttoctitlefont}{\hspace{0.38\textwidth} \bfseries\MakeUppercase}
\renewcommand{\cftbeforetoctitleskip}{-1em}
\renewcommand{\cftchapfont}{\normalsize\bfseries \MakeUppercase{\chaptername} }
\renewcommand{\cftbeforechapskip}{1em}
\renewcommand{\cftparskip}{-1mm}
\renewcommand{\cftdotsep}{1}
\setcounter{tocdepth}{2}

\linespread{1.1}
\setlength{\parindent}{1.25cm}
\bibliographystyle{plain}
\renewcommand{\contentsname}{Оглавление}
\counterwithin{figure}{chapter}
\setlength{\footskip}{25pt}

% для en версии заменить russian на english %
\addto\captionsrussian{\renewcommand{\bibname}{}}
\patchcmd{\thebibliography}{\chapter*}{}{}{}
\patchcmd{\thebibliography}{\chapter*{\refname}}{}{}{}


\newcommand{\likechapterheeading}[1]{ 
	\begin{flushright}
		\textbf{\MakeUppercase{#1}}
	\end{flushright}
}

\makeatletter
\renewcommand{\@dotsep}{2}
\newcommand{\l@likeechapter}[2]{{\@dottedtocline{0}{0pt}{0pt}{\bfseries #1}{\bfseries #2}}}
\makeatother

\newcommand{\likeechapter}[1]{    
	\likechapterheeading{#1}    
	\addcontentsline{toc}{likechapter}{\MakeUppercase{#1}}}


\pretocmd{\chapter}{\addtocounter{totfigures}{\value{figure}}}{}{}
\pretocmd{\chapter}{\addtocounter{tottables}{\value{table}}}{}{}

\newcounter{totreferences}
\pretocmd{\bibitem}{\addtocounter{totreferences}{1}}{}{}

\newcounter{totfigures}
\newcounter{tottables}
\makeatletter
\AtEndDocument{%
	\addtocounter{totfigures}{\value{figure}}%
	\addtocounter{tottables}{\value{table}}%
	\immediate\write\@mainaux{%
		\string\gdef\string\totfig{\number\value{totfigures}}%
		\string\gdef\string\tottab{\number\value{tottables}}%
		\string\gdef\string\totref{\number\value{totreferences}}%    
	}%
}
\makeatother



\begin{document}
	\input{main.tex}
	\chapter{Теория пограничного слоя и его моделирование}
	\input{ch1.tex}
	\chapter{Моделирование с использованием ANSYS FLUENT}
	\input{ch2.tex}
	\chapter{Анализ полученных данных}
	\input{ch3.tex}
	\newpage
	\likechapter{Заключение}
	\input{end.tex}
	\newpage
	\likechapter{Список использованных источников}
	\bibliography{bibliography}
	\newpage
	\input{appA.tex}
	\newpage
	\input{appB.tex}
\end{document}